<!DOCTYPE html>
<html>
<head>

  <!-- Meta -->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" />

  <!-- Title -->

  <title>Rural Data Dashboard (Prototype)</title>

  <!-- Scripts -->

  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/d3.v4.min.js"></script>
  <script src="assets/js/charts.js"></script>

  <!-- Stylesheets -->

  <link rel="stylesheet" type="text/css" href="assets/css/main.css">

</head>
<body>
  <h1>Rural Data Dashboard (Prototype)</h1>
  <div id="maps">
    <p>
      Map goes here.
    </p>
  </div>
  <div id="mainTables">
    <p>
      <strong>Region selector:</strong><br/>
      <strong>Actual % or rank:</strong>
    </p>
    <p>
      Data tables go here.
    </p>
    <div id="table1" class="tableContainer">
    </div>
    <div id="table2" class="tableContainer">
    </div>
  </div>
</body>

<!-- Charts -->

<script>
  d3.tsv("assets/data/data.tsv", function(error, data) {
    if (error) throw error;
    else {

      // Convert numbers to numeric

      data.forEach(function(d) {
        d.year = +d.year;
        d.percent = +d.percent;
        d.rank = +d.rank;
      });

      // Call chart functions

      var tableArray1 = tableArray().data(data).chartID("table1").regionSelectorID("rs1").measureSelectorID("ms1").prSelectorID("pr1").selectedMeasure("NAEP Mathematics 4");
      var tableArray2 = tableArray().data(data).chartID("table2").regionSelectorID("rs2").measureSelectorID("ms2").prSelectorID("pr2").selectedMeasure("NAEP Mathematics 4").percRank(1);

      d3.select("#table1").call(tableArray1);
      d3.select("#table2").call(tableArray2);

    };
  });
</script>

</html>
